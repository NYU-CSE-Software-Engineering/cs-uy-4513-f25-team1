<div class="sidebar" id="app-sidebar" data-turbo-permanent data-controller="sidebar-resize sidebar-search">
  <!-- Logo -->
  <div class="sidebar-logo">
    <%= link_to root_path, class: "logo-link" do %>
      <div class="logo-icon">
        <svg viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <linearGradient id="logoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="#3b82f6"/>
              <stop offset="100%" stop-color="#8b5cf6"/>
            </linearGradient>
          </defs>
          <path d="M16 2C8.268 2 2 8.268 2 16s6.268 14 14 14c3.866 0 7.384-1.566 9.923-4.1" stroke="url(#logoGradient)" stroke-width="3" stroke-linecap="round"/>
          <path d="M16 8c-4.418 0-8 3.582-8 8s3.582 8 8 8" stroke="url(#logoGradient)" stroke-width="3" stroke-linecap="round"/>
          <circle cx="24" cy="24" r="4" fill="url(#logoGradient)"/>
        </svg>
      </div>
      <span class="logo-text">Quadratic</span>
    <% end %>
  </div>

  <!-- Search Input -->
  <div class="sidebar-search-container">
    <div class="sidebar-search-input-wrapper">
      <svg class="sidebar-search-icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/>
      </svg>
      <input 
        type="text" 
        class="sidebar-search-input" 
        data-sidebar-search-target="input"
        data-action="input->sidebar-search#filter"
      >
    </div>
  </div>

  <!-- Manager Projects Section -->
  <%= render "application/sidebar_manager_section" %>

  <!-- Developer Projects Section -->
  <%= render "application/sidebar_developer_section" %>

  <!-- Invites Section -->
  <%= render "application/sidebar_invites_section" %>

  <!-- Footer -->
  <div class="sidebar-footer">
    <%= link_to edit_user_path(session[:user_id]), class: "footer-link" do %>
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
        <circle cx="12" cy="7" r="4"/>
      </svg>
      <span>Account</span>
    <% end %>
    <div class="logout-btn-container">
      <%= button_to session_path, method: :delete, class: "footer-logout-btn" do %>
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
          <polyline points="16 17 21 12 16 7"/>
          <line x1="21" y1="12" x2="9" y2="12"/>
        </svg>
        <span>Log out</span>
      <% end %>
    </div>
  </div>

  <!-- Resize Handle -->
  <div class="sidebar-resize-handle" data-sidebar-resize-target="handle" data-action="mousedown->sidebar-resize#startResize"></div>
</div>
