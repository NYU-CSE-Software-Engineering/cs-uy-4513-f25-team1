<div class="project-header d-flex justify-content-between align-items-center mb-4">
  <div>
    <h1 class="mb-2"><%= @project.name %></h1>
    <p class="text-muted" style="margin: 0;"><%= @project.description %></p>
  </div>
  <div class="flex space-x-2">
    <%= link_to "Edit Project", edit_project_path(@project), class: "btn btn-secondary" %>
    <%= link_to "Delete Project", @project, data: { turbo_method: :delete, turbo_confirm: "Are you sure?" }, class: "btn btn-danger" %>
    <%= link_to "New Task", new_project_task_path(@project), class: "btn btn-primary" %>
  </div>
</div>

<div class="card">
  <% if @tasks.any? %>
    <div class="task-list-header">
      <div class="col-id">ID</div>
      <div class="col-status">Status</div>
      <div class="col-title">Title</div>
      <div class="col-priority">Priority</div>
      <div class="col-assignee">Assignee</div>
    </div>
    
    <div class="task-list-body">
      <% @tasks.each do |task| %>
        <%= link_to project_task_path(@project, task), class: "task-row" do %>
          <div class="col-id text-muted">#<%= task.id %></div>
          <div class="col-status">
            <span class="status-dot status-<%= task.status %>"></span>
            <%= task.status.humanize %>
          </div>
          <div class="col-title"><%= task.title %></div>
          <div class="col-priority">
            <span class="<%= priority_badge_class(task.priority) %>"><%= task.priority.humanize %></span>
          </div>
          <div class="col-assignee">
            <% if task.user %>
              <span class="avatar-sm"><%= task.user.username&.first&.upcase || "U" %></span>
            <% else %>
              <span class="text-muted">-</span>
            <% end %>
          </div>
        <% end %>
      <% end %>
    </div>
  <% else %>
    <div class="empty-state">
      <p class="text-muted">No tasks found in this project.</p>
      <%= link_to "Create Task", new_project_task_path(@project), class: "btn btn-primary mt-2" %>
    </div>
  <% end %>
</div>

<style>
  .card {
    background: var(--bg-app);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    overflow: hidden;
  }
  
  .task-list-header {
    display: flex;
    padding: 10px 16px;
    background: var(--bg-sidebar);
    border-bottom: 1px solid var(--border-color);
    font-size: 12px;
    font-weight: 600;
    color: var(--text-secondary);
    text-transform: uppercase;
  }
  
  .task-row {
    display: flex;
    padding: 12px 16px;
    border-bottom: 1px solid var(--border-subtle);
    align-items: center;
    color: var(--text-primary);
    text-decoration: none;
    font-size: 14px;
    transition: background-color 0.1s;
  }
  
  .task-row:last-child {
    border-bottom: none;
  }
  
  .task-row:hover {
    background-color: var(--bg-hover);
    text-decoration: none;
  }
  
  /* Columns */
  .col-id { width: 60px; font-family: var(--font-mono); font-size: 12px; }
  .col-status { width: 140px; display: flex; align-items: center; gap: 8px; }
  .col-title { flex-grow: 1; font-weight: 500; }
  .col-priority { width: 80px; text-align: center; }
  .col-assignee { width: 80px; text-align: right; }
  
  /* Status Dots */
  .status-dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    border: 2px solid currentColor;
  }
  .status-todo { color: var(--text-tertiary); }
  .status-in_progress { color: #d29922; background: #d29922; } /* Yellow/Orange */
  .status-done { color: var(--primary-color); background: var(--primary-color); }
  
  .avatar-sm {
    display: inline-block;
    width: 20px;
    height: 20px;
    background: var(--border-color);
    color: var(--text-secondary);
    border-radius: 50%;
    text-align: center;
    line-height: 20px;
    font-size: 10px;
    font-weight: bold;
  }
  
  .empty-state {
    padding: 40px;
    text-align: center;
  }
</style>
